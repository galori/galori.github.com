
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>You've got a lot of Gal</title>
  <meta name="author" content="Gal Steinitz">

  
  <meta name="description" content="If you&#8217;re using Pivotal Labs&#8217; excellent Jasmine javascript BDD testing framework you may run into this. With Rails 3 Asset Pipeline, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://galori.github.com/blog/page/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="You've got a lot of Gal" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-213901-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">You've got a lot of Gal</a></h1>
  
    <h2>Yet another blog about Ruby, Rails, Javascript, Apple, Malteses and Shih-Tzus by Gal Steinitz</h2>
  
  <h3>This site is completely static. It was last generated with Octopress and Jekyll on Sep 02, 2013 and hosted on github pages.</h3>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:galori.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/01/jasmine-debugging-actual-line-numbers-in-error-messages/">Jasmine Debugging: Actual Line Numbers in Error Messages</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-01T00:00:00-07:00" pubdate data-updated="true">Jun 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you&#8217;re using Pivotal Labs&#8217; excellent <a href="http://pivotal.github.com/jasmine/">Jasmine</a> javascript BDD testing framework you may run into this. With Rails 3 Asset Pipeline, jasmine concatenates your js files into a single file - and therefore the line numbers on your stack traces are not useful (they will show the concatenated line numbers).</p>

<p>For example, you may see an error from the concatenated application.js line #17,403 instead of home.js line #15.  To get jasmine to reference the javascript files individually and thereby provide more informative error messages, add this in config/initializers/jasmine.rb:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jasmine</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Config</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">src_files</span>
</span><span class='line'>      <span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">assets</span><span class="o">[</span><span class="s2">&quot;application&quot;</span><span class="o">].</span><span class="n">dependencies</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">asset</span><span class="o">|</span>
</span><span class='line'>        <span class="s2">&quot;assets/&quot;</span> <span class="o">+</span> <span class="n">asset</span><span class="o">.</span><span class="n">logical_path</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>NOTE: This only works if your application.js requires all your javascript files and doesn&#8217;t include any javascript itself.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/17/ruby-1-9-3-segfault-on-lion/">&#8220;Rails New&#8221; Causes Segfault Using Ruby 1.9.3 on Lion</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-17T00:00:00-07:00" pubdate data-updated="true">May 17<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">My setup: RVM, MacPorts, OSX Lion

..and &#8220;rails new&#8221; causes a segfault! Stack trace seems to indicate its coming from the bundle install, specifically from net/http. Some googling suggests this is caused by https:// in the gemfile, and can be fixed by modifying it to http://. However since this is during the rails new - thats not possible.

No one solution I found addressed my particular issue, so I&#8217;ll document what worked for me, it may help you!

1. In xcode, Preferences &#8211;&gt; Downloads &#8211;&gt; Command Line Tools &#8211;&gt; Install

2. Install openssl via RVM:

[sourcecode]
rvm pkg install openssl
[/sourcecode]

3. Reinstall ruby 1.9.3, forcing GCC and the newly downloaded OpenSSL. The -C just means &#8220;use these configuration options&#8221;

[sourcecode]
rvm reinstall 1.9.3 -C &#8211;with-gcc=gcc &#8211;with-openssl-dir=~/.rvm/usr
[/sourcecode]

References:

<a href="https://github.com/rails/rails/issues/4766" title="https://github.com/rails/rails/issues/4766">https://github.com/rails/rails/issues/4766</a>
<a href="http://stackoverflow.com/questions/9626729/how-do-you-install-build-ruby-1-9-3-on-osx-lion" title="http://stackoverflow.com/questions/9626729/how-do-you-install-build-ruby-1-9-3-on-osx-lion">http://stackoverflow.com/questions/9626729/how-do-you-install-build-ruby-1-9-3-on-osx-lion</a>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/18/easter-egg-cause-git-to-say-already-up-to-date-yeeah/">Easter Egg? Cause Git to Say: &#8220;Already Up-to-date. Yeeah!&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-18T00:00:00-07:00" pubdate data-updated="true">Jun 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Git responses are usually very straightforward and to the point, but today I got git to say <strong>&#8220;Yeah!&#8221;</strong> by telling it to merge something it just merged. To get your git to be a little silly too:</p>

<p>Immediately after doing a merge, look at that last merge commit</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git log -n1
</span><span class='line'>
</span><span class='line'>commit 76c4ac19c545fdc9d20c43beb358c47c0d84185a
</span><span class='line'>Merge: 2619f49 0f71f1f
</span><span class='line'>Author: someone@somewhere.com
</span><span class='line'>Date:   Fri Jun 17 17:36:10 2011 -0700
</span><span class='line'>
</span><span class='line'><span class="o">[</span>master<span class="o">]</span> Merge branch <span class="s1">&#39;release&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then&#8230;tell git to merge the same two SHA&#8217;s again</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git merge 2619f49 0f71f1f
</span><span class='line'>Already up-to-date. Yeeah!
</span></code></pre></td></tr></table></div></figure>


<p>This is using git v1.7.5.4 command line, on OSX.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/05/when-did-this-feature-go-live/">When Did This Feature Go Live? (Starring Git)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-05T00:00:00-07:00" pubdate data-updated="true">Jun 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It can be very useful to be able to answer this question accurately.</p>

<p>To do this, add code to your deploy script that tags every production deploy with git. Example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  timestamp = Time.now.strftime('%Y-%m-%d/at/%H.%M')
</span><span class='line'>  tag_name = "deploy/#{timestamp}"
</span><span class='line'>  `git tag #{tag_name}; git push origin #{tag_name}`</span></code></pre></td></tr></table></div></figure>


<p>Now, if the question ever comes up when a particular feature went live, you can determine this down to the minute. Find a commit that was part of this feature. For example, a new header design:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   git log --grep="header"</span></code></pre></td></tr></table></div></figure>


<p>Now you can use the <em>&#8211;contains</em> switch to find the earliest tag that contained this particular commit:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>   git tag --contains &lt;SHA&gt;</span></code></pre></td></tr></table></div></figure>


<p>See <a href="/blog/2011/06/05/useful-lesser-known-git-commands/">my previous post on git</a> for more useful git commands.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/05/useful-lesser-known-git-commands/">Useful but Lesser Known Git Commands</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-05T00:00:00-07:00" pubdate data-updated="true">Jun 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Therefore, here are some of my favorite, useful git commands:</p>

<h2>Diff of a Diff</h2>

<p>Looking at the diff representing one commit is old news.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git show &lt;SHA&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Comparing a single file between two commits (or branches) is also not uncommon:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git diff branch1 branch2 -- path/to/filename.ext
</span></code></pre></td></tr></table></div></figure>


<p>However - if the files were pretty far in the two branches to begin with - and you&#8217;d just like to compare the CHANGES introduced by two commits (a diff of a diff), one way is this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>diff &lt;<span class="o">(</span>git show SHA<span class="o">)</span>  &lt;<span class="o">(</span>git show SHA<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>git log with diffs</h2>

<p>Oft overlooked feature:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git log -u
</span></code></pre></td></tr></table></div></figure>


<p>Can be useful if you&#8217;d like to track the history of a certain file, and view all the changes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git log -u -- path/to/filename.ext
</span></code></pre></td></tr></table></div></figure>


<h2>git log, tracking renames</h2>

<p>By default - viewing the history of a specific file with git log only goes as far back as when the file was created - or renamed.</p>

<p>If you&#8217;d like to track it back past any number of renames / moves:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git log -u --follow -- path/to/filename.ext
</span></code></pre></td></tr></table></div></figure>


<p>This can get pretty slow for larger repos, which I imagine is why its not on by default.</p>

<h2>View a file in a branch, without actually checking it out</h2>

<p>If you&#8217;re working on a file and wish to view that same file in another branch, you can avoid extra stashes &amp; checkouts and just &#8220;peek&#8221; into that branch:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git show branch2:path/to/filename.ext
</span></code></pre></td></tr></table></div></figure>


<p>Note the syntax of branch:file without spaces, which is unusual.</p>

<h2>Recommit a commit?</h2>

<p>You may want to do this if the commit message is really bad (what are some of the worst messages you&#8217;ve seen? A whole other blog post&#8230;) and it&#8217;s already been pushed remotely.</p>

<p>Git doesn&#8217;t like letting you do this, you can&#8217;t commit changes to files that haven&#8217;t been changed. You can&#8217;t cherry-pick a commit if all the changes are already in place. You could do a revert and then a re-revert - but semantically that might even be worse in the history - it implies there was a problem with the code.</p>

<p>Another approach:  Branch, amend, merge</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git checkout master
</span><span class='line'>git checkout -b tmp_branch
</span><span class='line'>git commit --amend
</span><span class='line'>git checkout master
</span><span class='line'>git merge tmp_branch
</span><span class='line'>git delete -D tmp_branch
</span></code></pre></td></tr></table></div></figure>


<p>you&#8217;ll end up with a duplicate commit, and a merge commit - but it gives you the opportunity to provide more verbose info on that 2nd commit message. In this example the commit in question would be at the tip of master, but any commit in history should work - just branch your tmp_branch off of whichever commit needs amending.</p>

<h2>Common Ancestor</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git merge-base branch1 branch2
</span></code></pre></td></tr></table></div></figure>


<p>Shows you the one shared commit where these two branches diverged. In the git &#8220;file system&#8221;, any two commits - no matter on which branch will have a shared ancestors. It&#8217;s sort of like evolution.</p>

<p>This can be useful if you&#8217;re in the middle of resolving a merge conflict, and you feel like the 3 pane diff GUI is not providing you with enough information.  Open up a 2nd terminal, find the common ancestor and then diff the file in question between the branch and the common ancestor, to see exactly whats changed.</p>

<h2>List of commits that exist in one branch but not in another</h2>

<p>I like this syntax because it reads well to me as a developer. Show me commits that are in branch1 that are not in branch2:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git log branch1 ^branch2
</span></code></pre></td></tr></table></div></figure>


<p>If you or your group does a lot of cherry-picking or rebasing, then this won&#8217;t always work - because those operations create a new SHA - and the above depend on the SHA being the same.  Start using merges instead if possible, then the usefulness of the above will become apparent.</p>

<p>You can use similar syntax to determine if a single commit is part of a branch or not:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git log -n1 commit ^branch
</span></code></pre></td></tr></table></div></figure>


<p>If the commit is part of the branch, it will show you nothing. If it is not part of the branch&#8230;it will show you the commit.</p>

<h2>Make an exiting branch tracking</h2>

<p>If a branch was started locally and was then pushed remotely. You probably found out soon enough that its not set up to track so well - compared to a branch that started remotely. To get it all set up:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git branch --set-upstream foo upstream/foo
</span></code></pre></td></tr></table></div></figure>


<p>(Thanks to <a href="http://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch">this</a> stackoverflow.com article for this last one)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/26/googles-spell-check-api-stopped-working-here-is-the-fix/">Google&#8217;s Spell Check API Stopped Working - Here Is the Fix</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-07-26T00:00:00-07:00" pubdate data-updated="true">Jul 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content">Google&#8217;s undocumented, unpublished, not-for-public-consumption Spell Check API stopped working. How dare they?

Well turns out the fix is simple, after using Charles to debug the HTTP requests of the Google Toolbar spell checker, I narrowed down the difference between my calls and theirs to a missing host header. Added that back in and everything works again.  

Usage:
(I don&#8217;t parse the XML, because I&#8217;m just passing it to a flash client):
[sourcecode language=&#8221;ruby&#8221;]
=&gt; puts Spell.check(&#8216;does it worka?&#8217;)
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;spellresult error=&quot;0&quot; clipped=&quot;0&quot; charschecked=&quot;14&quot;&gt;&lt;c o=&quot;8&quot; l=&quot;5&quot; s=&quot;1&quot;&gt;works	work	wok	worker	woke&lt;/c&gt;&lt;/spellresult&gt;
[/sourcecode]

Source:
[sourcecode language=&#8221;ruby&#8221;]
require &#8216;rubygems&#8217;
require &#8216;builder&#8217;
require &#8216;net/http&#8217;
require &#8216;net/https&#8217;

module Spell

  HOST_HEADER = &#8216;www.google.com&#8217;
  HOST_POST = &#8216;google.com&#8217;
  PATH = &quot;/tbproxy/spell?lang=en&amp;hl=en&amp;v=2.0f&quot;

  def self.check(text)
    http = Net::HTTP.new(HOST_POST,443)
    http.use_ssl = true
    http.verify_mode = OpenSSL::SSL::VERIFY_NONE
    headers = {&quot;Host&quot; =&gt; HOST_HEADER}
    data = get_xml_payload(text)
    response_headers, response_data = http.post(PATH, data, headers)
    response_data
  end

private 

  def self.get_xml_payload(text)
    xml = Builder::XmlMarkup.new
    xml_string =  xml.spellrequest(:textalreadyclipped =&gt; &quot;0&quot;, :ignoredups =&gt; &quot;0&quot;, :ignoredigits =&gt; &quot;1&quot;, :ignoreallcaps =&gt; &quot;0&quot;) do
      xml.text(text)
    end
  end
end
[/sourcecode]
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/07/array-only-for-ruby/">Array#only for Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-07T00:00:00-07:00" pubdate data-updated="true">Jun 7<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content">How many times do you use <strong>some_array.first</strong> as a way to get at the one and only member of that array?

It always bugged me that this can be error prone - if the array has more than one component you&#8217;ll never know about it, and the .first method isn&#8217;t semantically describing what you are doing - grabbing the one and only member.

If you add this somewhere in lib/initializiers, you get the .only method

[sourcecode language=&#8221;ruby&#8221;]
class Array
  def only
    raise &quot;called Array#only with array of length #{self.length}&quot; if self.length&gt;1
    self.first
  end
end
[/sourcecode]

which provides a more semantic description of what you&#8217;re trying to do:

[sourcecode language=&#8221;ruby&#8221;]
&gt;&gt; [].only
=&gt; nil
&gt;&gt; [1].only
=&gt; 1
&gt;&gt; [1,2,3].only
RuntimeError: called Array#only with array of length 3
[/sourcecode]
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/25/update-to-fire-and-consume-custom-global-events-in-jquery/">Update to &#8220;Fire and Consume Custom Global Events in jQuery&#8221;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-25T00:00:00-07:00" pubdate data-updated="true">Mar 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Update 9-8-2012: <a href="/blog/2012/09/08/global-javascript-events-with-backbone-js/">Global events with Backbone JS</a></p>

<p>This is an update to <a href="/blog/2009/11/06/fire-and-consume-custom-global-events-in-jquery/">a previous post</a></p>

<p>jQuery 1.4 is out, and the undocumented syntax I described for triggering and responding to global events has changed. You can still use the same pattern. When firing a global event, bind to any element on the DOM, such as &#8216;body&#8217; or document:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;sneeze&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){})</span>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;sneeze&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is a great way to decouple code and when used like a messaging system, can really clean up your code.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/25/sql-quiz/">SQL Quiz</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-25T00:00:00-07:00" pubdate data-updated="true">Mar 25<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content">I enjoyed this interactive <a href="http://perfectionkills.com/javascript-quiz/">javascript quiz</a> from perfectionkills.com, and thought it would be fun to create an interactive SQL quiz.
<p>&nbsp;</p>
You can head on over directly to <a href="http://pages.ragingstudios.com/quiz.html" target="_blank">my SQL quiz</a> or preview the questions here.
<p>&nbsp;</p>
Given the following two tables:

[sourcecode language=&#8221;text&#8221;]
select * from a;                select * from b;        
+&#8212;&#8212;+&#8212;&#8212;-+                +&#8212;&#8212;+&#8212;&#8212;-+&#8212;&#8212;+        
| id   | label |                | id   | label | a_id |        
+&#8212;&#8212;+&#8212;&#8212;-+                +&#8212;&#8212;+&#8212;&#8212;-+&#8212;&#8212;+        
|    1 | Alpha |                |    1 | I     |    1 |        
|    2 | Beta  |                |    2 | II    |    1 |        
|    3 | Gamma |                |    3 | III   |    2 |        
+&#8212;&#8212;+&#8212;&#8212;-+                +&#8212;&#8212;+&#8212;&#8212;-+&#8212;&#8212;+        
[/sourcecode]
          
What would be the result of each of the following SQL statements&#8230;..

(continued)

Head over to the  <a href="http://galori.github.com/quiz.html">interactive SQL quiz</a> to match the queries with the results.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/12/14/cleaner-css-browser-targetting-with-simple-useragent-gem/">Cleaner CSS Browser Targetting With Simple-useragent Gem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-12-14T00:00:00-08:00" pubdate data-updated="true">Dec 14<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content">I just posted the &#8220;simple-useragent&#8221; gem, which provides the ability to for cleaner browser specific CSS targeting*.  This is for rails projects but the concept can work anywhere.

For example, instead of the targeting IE7 with your CSS with

[sourcecode language=&#8221;css&#8221;]
/* IE7 */
*:first-child+html #content {
  height: 500px;
}
[/sourcecode]

You can now do this:

[sourcecode language=&#8221;css&#8221;]
.ie7 #content {
  height: 500px;
}
[/sourcecode]

To take advantage of this, you just need to add the following to your body tag:

[sourcecode language=&#8221;ruby&#8221; htmlscript=&#8221;true&#8221;]
&lt;body class=&#8217;&lt;%=UserAgent::browser(request)%&gt;&#8217;&gt;
[/sourcecode]

* Admittedly targeting CSS to a specific browser is a bad practice that should generally be avoided. For more details about why browser detection in general is a bad idea, see <a href="http://www.quirksmode.org/js/support.html">www.quirksmode.org/js/support.html</a>. However sometimes there is no choice - especially under time constraints.

<hr>

Additionally, simple-useragent makes the following methods available to you:

[sourcecode language=&#8221;ruby&#8221; htmlscript=&#8221;true&#8221;]
UserAgent::is_desktop?
UserAgent::is_mobile?
UserAgent::is_blackberry?
UserAgent::is_iphone?
[/sourcecode]

The is_mobile? and is_desktop? methods are using a minimalistic approach, converted from the python script here: http://gist.github.com/88057. The theory is that since there are a lot more mobile user agents than there are desktop user agents (hundreds or even thousands) - we detect the known list of desktop user agents, and if its not one of those we assume that it is mobile. It works surprisingly well in the vast majority of cases. So far I’ve only seen it fail with spoofed or malformed user agents.

To install:

[sourcecode language=&#8221;bash&#8221;]gem install simple-useragent[/sourcecode]

The gem is hosted on gemcutter - if you don&#8217;t have gemcutter as a source you&#8217;ll have to add it

[sourcecode language=&#8221;bash&#8221;]gem install gemcutter
gem tumble [/sourcecode]

<hr>

source at <a href="http://github.com/galori/simple-useragent">http://github.com/galori/simple-useragent</a>

Update:  Thanks to an anonymous commenter on <a href="http://www.rubyflow.com/items/3148">rubyflow</a> for pointing out a jQuery version of this: <a href="http://github.com/alexrabarts/jquery-platformselector">jquery.platformselector</a>.  
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <img src='/images/gal_apple_iigs.jpeg'>
<caption>1986; Loving my new Apple IIgs</caption><center>
  <div style='border-radius: 10px; background-color: white; padding 10px; margin-top: 10px'>
    <a href="http://www.linkedin.com/in/galsteinitz" style='text-decoration:none; position:relative; left: -10px; top: -14px;'>

    <img src="http://www.linkedin.com/img/webpromo/btn_viewmy_160x33.png" width="110"  border="0" alt="View Gal Steinitz's profile on LinkedIn">

    <img src="/images/gal-steinitz-avatar.jpg" style="margin-top:-39px">
    </a>
  </div>
</center><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/09/02/free-ssl-on-heroku/">Free SSL on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/21/ctrl-a-to-archive-in-outlook-for-mac-2011/">Ctrl-A to Archive in Outlook for Mac 2011</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/29/one-line-http-server-in-ruby-or-python/">One line HTTP server in Ruby or Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/27/svn-full-text-search-for-a-specific-string-in-a-commit/">SVN: Full text search for a specific string in a commit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/27/git-tips-count-number-of-commits-between-two-commits/">Git tips: Count # of commits between two commits</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/galori">@galori</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'galori',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("galori", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/galori" class="twitter-follow-button" data-show-count="true">Follow @galori</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/cysurflex?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/cysurflex">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Gal Steinitz -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ragingstudiosblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
